## Server configuration

This folder is where you should place your server configuration files. Each file in this folder will be treated as a [Handlebars](https://handlebarsjs.com/) template. See the content of the generated files for example of how to break your configuration using [partials](https://handlebarsjs.com/guide/partials.html).

#### Structure

Here is an explanation of the structure of this folder (as generated by `acdf init`):

##### Installation folders

<pre>
template/src/conf
├── local.env.js
├── prod.env.js
├── <b>application      # application server installation</b>
│   ├── config-XXX.d
│   │   └── config-XXX.xml
│   ├── serverConf.d
│   │   └── custom.xml
│   ├── local.env.js
│   └── prod.env.js
└── <b>web              # web server installation</b>
    ├── config-XXX.d
    │   └── config-XXX.xml
    ├── serverConf.d
    │   └── custom.xml
    ├── local.env.js
    └── prod.env.js
</pre>

These folders each represent an *installation*, ie: one or more instances installed on a single server. 

The generated structure represents a typicall app/web server installation of Adobe Campaign, as decribed in [this document](https://experienceleague.adobe.com/docs/campaign-classic/using/technotes/hardware-sizing.html?lang=en#scenario-1).

##### Environment files

<pre>
template/src/conf
├── <b>local.env.js             # root level</b>
├── <b>prod.env.js              # root level</b>
├── application
│   ├── config-XXX.d
│   │   └── config-XXX.xml
│   ├── serverConf.d
│   │   └── custom.xml
│   ├── <b>local.env.js         # installation level</b>
│   └── <b>prod.env.js          # installation level</b>
└── web
    ├── config-XXX.d
    │   └── config-XXX.xml
    ├── serverConf.d
    │   └── custom.xml
    ├── <b>local.env.js         # installation level</b>
    └── <b>prod.env.js          # installation level</b>
</pre>

These files allow you to provide properties to the Handlebars engine so that you can use them in the XML files.

###### Root level

The environment files at the **root level** provide properties for use accross all installations. For example, you may want all your instances on all servers to use the same username for database access.

###### Installation level

The environment files at the **installation level** import the properties declared at the **root level** and add some some installation-specific properties. For example, for security reasons the internal password should not be the same on different servers, so declare it here. 

##### Configuration folders and files

<pre>
template/src/conf
├── local.env.js
├── prod.env.js
├── application
│   ├── <b>config-XXX.d         # custom instance configuration
│   │   └── config-XXX.xml</b>
│   ├── <b>serverConf.d         # server configuration
│   │   └── custom.xml</b>
│   ├── local.env.js
│   └── prod.env.js
└── web
    ├── <b>config-XXX.d         # custom instance configuration
    │   └── config-XXX.xml</b>
    ├── <b>serverConf.d         # server configuration
    │   └── custom.xml</b>
    ├── local.env.js
    └── prod.env.js
</pre>

These files contain the actual configuration files for each of the instances in an installation.

#### Building and deployment

This folder corresponds to the following path on a server with a default Adobe Campaign's installation directory: `/usr/local/neolane/nl6/conf`.

When the project is built, a `.zip` archive will be made of the compiled XML files in this folder, which can then be easily deployed by simply unzipping the archive into `/usr/local/neolane/nl6/conf`.